searchable = TRUE
)
withtitle <- htmlwidgets::prependContent(table_out,
h2(class = "title", paste("Crime (group A) frequency by category in each neighborhood")))
withtitle
table_out <- reactable(
c_nh,
defaultColDef = colDef(
header = function(value) gsub(".", " ", value, fixed = TRUE),
cell = function(value) format(value, nsmall = 1),
align = "center",
minWidth = 100,
headerStyle = list(background = "#f7f7f8")
),
columns = list(
Species = colDef(minWidth = 200)  # overrides the default
),
bordered = TRUE,
highlight = TRUE,
filterable = TRUE,
searchable = TRUE
)
withtitle <- htmlwidgets::prependContent(table_out,
h2(class = "title", paste("Crime (group A) frequency by category in each neighborhood")))
withtitle
table_out <- reactable(
c_nh,
defaultColDef = colDef(
header = function(value) gsub(".", " ", value, fixed = TRUE),
cell = function(value) format(value, nsmall = 1),
align = "center",
minWidth = 300,
headerStyle = list(background = "#f7f7f8")
),
columns = list(
Species = colDef(minWidth = 200)  # overrides the default
),
bordered = TRUE,
highlight = TRUE,
filterable = TRUE,
searchable = TRUE
)
withtitle <- htmlwidgets::prependContent(table_out,
h2(class = "title", paste("Crime (group A) frequency by category in each neighborhood")))
withtitle
table_out <- reactable(
c_nh,
defaultColDef = colDef(
header = function(value) gsub(".", " ", value, fixed = TRUE),
cell = function(value) format(value, nsmall = 1),
align = "center",
minWidth = 250,
headerStyle = list(background = "#f7f7f8")
),
columns = list(
Species = colDef(minWidth = 200)  # overrides the default
),
bordered = TRUE,
highlight = TRUE,
filterable = TRUE,
searchable = TRUE
)
withtitle <- htmlwidgets::prependContent(table_out,
h2(class = "title", paste("Crime (group A) frequency by category in each neighborhood")))
withtitle
table_out <- reactable(
c_nh,
defaultColDef = colDef(
header = function(value) gsub(".", " ", value, fixed = TRUE),
cell = function(value) format(value, nsmall = 1),
align = "center",
minWidth = 200,
headerStyle = list(background = "#f7f7f8")
),
columns = list(
Species = colDef(minWidth = 200)  # overrides the default
),
bordered = TRUE,
highlight = TRUE,
filterable = TRUE,
searchable = TRUE
)
withtitle <- htmlwidgets::prependContent(table_out,
h2(class = "title", paste("Crime (group A) frequency by category in each neighborhood")))
withtitle
nibrs_crime_category_nh <- c_nh %>% dplyr:: select("NIRBRS.Crime",grep("Frequency...", names(c_nh)))
View(nibrs_crime_category_nh)
grep("Frequency...", names(c_nh)
grep("Frequency...", names(c_nh))
names(c_nh)
nibrs_crime_category_nh <- import("data/nibrs_crime_category_nh.csv")
nibrs_crime_category_nh <- read.csv("data/nibrs_crime_category_nh.csv")
View(nibrs_crime_category_nh)
library(htmltools)
library(rio)
nibrs_crime_category_nh <- import(paste0("data/nibrs_crime_category_nh.csv"))
View(nibrs_crime_category_nh)
c_nh <- import("data/nibrs_crime_nh.csv")
View(c_nh)
table_out <- reactable(
c_nh,
defaultColDef = colDef(
header = function(value) gsub(".", " ", value, fixed = TRUE),
cell = function(value) format(value, nsmall = 1),
align = "center",
minWidth = 200,
headerStyle = list(background = "#f7f7f8")
),
columns = list(
Species = colDef(minWidth = 200)  # overrides the default
),
bordered = TRUE,
highlight = TRUE,
filterable = TRUE,
searchable = TRUE
)
withtitle <- htmlwidgets::prependContent(table_out,
h2(class = "title", paste("Crime (group A) frequency by category in each neighborhood")))
withtitle
c_zip <- import("data/nibrs_crime_zip.csv")
table_out <- reactable(
c_zip,
defaultColDef = colDef(
header = function(value) gsub(".", " ", value, fixed = TRUE),
cell = function(value) format(value, nsmall = 1),
align = "center",
minWidth = 200,
headerStyle = list(background = "#f7f7f8")
),
columns = list(
Species = colDef(minWidth = 200)  # overrides the default
),
bordered = TRUE,
highlight = TRUE,
filterable = TRUE,
searchable = TRUE
)
withtitle <- htmlwidgets::prependContent(table_out,
h2(class = "title", paste("Crime (group A) frequency by category in each neighborhood")))
withtitle
c_nh <- import("data/nibrs_crime_category_nh.csv")
table_out <- reactable(
c_nh,
defaultColDef = colDef(
header = function(value) gsub(".", " ", value, fixed = TRUE),
cell = function(value) format(value, nsmall = 1),
align = "center",
minWidth = 200,
headerStyle = list(background = "#f7f7f8")
),
columns = list(
Species = colDef(minWidth = 200)  # overrides the default
),
bordered = TRUE,
highlight = TRUE,
filterable = TRUE,
searchable = TRUE
)
withtitle <- htmlwidgets::prependContent(table_out,
h2(class = "title", paste("Crime (group A) frequency by category in each neighborhood")))
withtitle
c_zip <- import("data/nibrs_crime_category_zip.csv")
table_out <- reactable(
c_zip,
defaultColDef = colDef(
header = function(value) gsub(".", " ", value, fixed = TRUE),
cell = function(value) format(value, nsmall = 1),
align = "center",
minWidth = 200,
headerStyle = list(background = "#f7f7f8")
),
columns = list(
Species = colDef(minWidth = 200)  # overrides the default
),
bordered = TRUE,
highlight = TRUE,
filterable = TRUE,
searchable = TRUE
)
withtitle <- htmlwidgets::prependContent(table_out,
h2(class = "title", paste("Crime (group A) frequency by category in each neighborhood")))
withtitle
c_nh <- import("data/nibrs_crime_nh.csv")
table_out <- reactable(
c_nh,
defaultColDef = colDef(
header = function(value) gsub(".", " ", value, fixed = TRUE),
cell = function(value) format(value, nsmall = 1),
align = "center",
minWidth = 200,
headerStyle = list(background = "#f7f7f8")
),
columns = list(
Species = colDef(minWidth = 200)  # overrides the default
),
bordered = TRUE,
highlight = TRUE,
filterable = TRUE,
searchable = TRUE
)
withtitle <- htmlwidgets::prependContent(table_out,
h2(class = "title", paste("Crime (group A) frequency by type in each neighborhood")), size =4)
withtitle
c_nh <- import("data/nibrs_crime_nh.csv")
table_out <- reactable(
c_nh,
defaultColDef = colDef(
header = function(value) gsub(".", " ", value, fixed = TRUE),
cell = function(value) format(value, nsmall = 1),
align = "center",
minWidth = 200,
headerStyle = list(background = "#f7f7f8")
),
columns = list(
Species = colDef(minWidth = 200)  # overrides the default
),
bordered = TRUE,
highlight = TRUE,
filterable = TRUE,
searchable = TRUE
)
withtitle <- htmlwidgets::prependContent(table_out,
h2(class = "title", paste("Crime (group A) frequency by type in each neighborhood")),
font=list(size=5))
withtitle
knitr::opts_chunk$set(message=FALSE,warning=FALSE, cache=TRUE)
library(tidyverse)
library(doParallel)
library(R.utils)
library(reactable)
library(rio)
library(htmltools)
options(digits = 7)
registerDoParallel()
getDoParWorkers()
c_nh <- import("data/nibrs_crime_nh_month.csv")
c_nh
View(c_nh)
c_nh <- import("data/nibrs_crime_nh_month.csv")
table_out <- reactable(
c_nh,
defaultColDef = colDef(
header = function(value) gsub(".", " ", value, fixed = TRUE),
cell = function(value) format(value, nsmall = 1),
align = "center",
minWidth = 200,
headerStyle = list(background = "#f7f7f8")
),
columns = list(
Species = colDef(minWidth = 200)  # overrides the default
),
bordered = TRUE,
highlight = TRUE,
filterable = TRUE,
searchable = TRUE
)
withtitle <- htmlwidgets::prependContent(table_out,
h2(class = "title", paste("Crime (group A) frequency by type and month in each neighborhood")),
font=list(size=5))
withtitle
c_nh <- import("data/nibrs_crime_category_nh_month.csv")
c_nh <- import("data/nibrs_crime_category_nh_month.csv")
c_nh
c_nh <- import("data/nibrs_crime_nh_month.csv")
c_nh <- import("data/nibrs_crime_category_nh_month.csv")
c_nh
unique(c_nh$`NIRBRS Crime`)
colnames(c_nh)[2] <- "NIRBRS Crime Category"
colnames(c_nh)[3] <- "NIRBRS Crime"
c_zip <- import("data/nibrs_crime_zip_month.csv")
View(c_zip)
c_nh <- import("data/nibrs_crime_category_nh_month.csv")
colnames(c_nh)[2] <- "NIRBRS Crime Category"
colnames(c_nh)[3] <- "NIRBRS Crime"
table_out <- reactable(
c_nh,
defaultColDef = colDef(
header = function(value) gsub(".", " ", value, fixed = TRUE),
cell = function(value) format(value, nsmall = 1),
align = "center",
minWidth = 200,
headerStyle = list(background = "#f7f7f8")
),
columns = list(
Species = colDef(minWidth = 200)  # overrides the default
),
bordered = TRUE,
highlight = TRUE,
filterable = TRUE,
searchable = TRUE
)
withtitle <- htmlwidgets::prependContent(table_out,
h2(class = "title", paste("Crime (group A) frequency by category and month in each neighborhood")))
withtitle
2
2
2
knitr::opts_chunk$set(message=FALSE,warning=FALSE, cache=TRUE)
library(tidyverse)
library(doParallel)
library(R.utils)
library(reactable)
library(rio)
library(htmltools)
options(digits = 7)
registerDoParallel()
getDoParWorkers()
c_nh <- import("data/nibrs_crime_nh_month.csv")
table_out <- reactable(
c_nh,
defaultColDef = colDef(
header = function(value) gsub(".", " ", value, fixed = TRUE),
cell = function(value) format(value, nsmall = 1),
align = "center",
minWidth = 200,
headerStyle = list(background = "#f7f7f8")
),
columns = list(
Species = colDef(minWidth = 200)  # overrides the default
),
bordered = TRUE,
highlight = TRUE,
filterable = TRUE,
searchable = TRUE
)
withtitle <- htmlwidgets::prependContent(table_out,
h2(class = "title", paste("Crime (group A) frequency by type and month in each neighborhood")),
font=list(size=5))
withtitle
c_nh <- import("data/nibrs_crime_category_nh_month.csv")
colnames(c_nh)[2] <- "NIRBRS Crime Category"
colnames(c_nh)[3] <- "NIRBRS Crime"
table_out <- reactable(
c_nh,
defaultColDef = colDef(
header = function(value) gsub(".", " ", value, fixed = TRUE),
cell = function(value) format(value, nsmall = 1),
align = "center",
minWidth = 200,
headerStyle = list(background = "#f7f7f8")
),
columns = list(
Species = colDef(minWidth = 200)  # overrides the default
),
bordered = TRUE,
highlight = TRUE,
filterable = TRUE,
searchable = TRUE
)
withtitle <- htmlwidgets::prependContent(table_out,
h2(class = "title", paste("Crime (group A) frequency by category and month in each neighborhood")))
withtitle
c_zip <- import("data/nibrs_crime_zip_month.csv")
table_out <- reactable(
c_zip,
defaultColDef = colDef(
header = function(value) gsub(".", " ", value, fixed = TRUE),
cell = function(value) format(value, nsmall = 1),
align = "center",
minWidth = 200,
headerStyle = list(background = "#f7f7f8")
),
columns = list(
Species = colDef(minWidth = 200)  # overrides the default
),
bordered = TRUE,
highlight = TRUE,
filterable = TRUE,
searchable = TRUE
)
withtitle <- htmlwidgets::prependContent(table_out,
h2(class = "title", paste("Crime (group A) frequency by type and month in each zipcode")))
withtitle
c_zip <- import("data/nibrs_crime_category_zip_month.csv")
table_out <- reactable(
c_zip,
defaultColDef = colDef(
header = function(value) gsub(".", " ", value, fixed = TRUE),
cell = function(value) format(value, nsmall = 1),
align = "center",
minWidth = 200,
headerStyle = list(background = "#f7f7f8")
),
columns = list(
Species = colDef(minWidth = 200)  # overrides the default
),
bordered = TRUE,
highlight = TRUE,
filterable = TRUE,
searchable = TRUE
)
withtitle <- htmlwidgets::prependContent(table_out,
h2(class = "title", paste("Crime (group A) frequency by category and month in each zipcode")))
withtitle
View(c_zip)
c_zip2 <- import("data/nibrs_crime_zip_month.csv")
View(c_zip2)
knitr::opts_chunk$set(message=FALSE,warning=FALSE, cache=TRUE)
masterODP_CPAL <- import("D:/SMU/Ph.D/CPAL/Open Data Portal Incidents/Data/Incidents/Processed Data/Dallas Police Incidents - All Incidents Since Aug 2019.csv")
library(tidyverse)
library(doParallel)
library(R.utils)
library(reactable)
library(rio)
library(htmltools)
options(digits = 7)
registerDoParallel()
getDoParWorkers()
masterODP_CPAL <- import("D:/SMU/Ph.D/CPAL/Open Data Portal Incidents/Data/Incidents/Processed Data/Dallas Police Incidents - All Incidents Since Aug 2019.csv")
a <- ((table(masterODP_CPAL$Year, masterODP_CPAL$Month)))
b <- data.frame(colMeans(a)) %>% mutate(Var1 = "Average", Var2 = c(1:12)) %>% rename(Freq = colMeans.a. ) %>%
relocate(Var1, .before = Freq) %>% relocate(Var2, .before = Freq)
a <- data.frame(a) %>% dplyr::filter(Var1 != 2019)
a <- rbind(a,b)
a$Freq[a$Var1 == 2022 & a$Var2 == 12] <- NA
data1 <- a %>% dplyr::filter(Var1 == "Average")
data2 <- a %>% dplyr::filter(Var1 == 2022)
ggplot(NULL, aes(Var2, Freq)) +
geom_line(data = data1, aes(color='Last 3 Years', group=1)) +
geom_line(data = data2, aes(color='2022', group=1)) + ylab("Frequency") + xlab("Month") +
ggtitle(paste( "All Crime Incidents per Month")) +
theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1, size = 9)) +
scale_color_manual(name='Legend',
breaks=c('Last 3 Years', '2022'),
values=c('Last 3 Years'='red', '2022'='blue')) + theme(
legend.position = c(0.02, .95),
legend.justification = c("left", "top"),
legend.box.just = "left",
legend.margin = margin(6, 6, 6, 6)
)
nibrs_crime_category_nh <- import(paste0(libDB, "New Model Development/Neighborhood Crime Dashboard/nibrs_crime_category_nh.csv"))
libDB <- "D:/SMU/Ph.D/CPAL/"
nibrs_crime_category_nh <- import(paste0(libDB, "New Model Development/Neighborhood Crime Dashboard/nibrs_crime_category_nh.csv"))
nibrs_crime_category_nh <- nibrs_crime_category_nh %>% dplyr:: select("NIRBRS Crime Category",grep("Frequency at", names(nibrs_crime_category_nh)))
nibrs_crime_category_nh <- nibrs_crime_category_nh %>%
select("NIRBRS Crime Category", where(~ is.numeric(.) && sum(.) >= 1100))
#nibrs_crime_category_nh <- data.frame(nibrs_crime_category_nh)
a <- colSums(Filter(is.numeric, nibrs_crime_category_nh))
a <- c("Total Count", a)
nibrs_crime_category_nh[21,] <- a
table_out <- reactable(
nibrs_crime_category_nh,
defaultColDef = colDef(
header = function(value) gsub(".", " ", value, fixed = TRUE),
cell = function(value) format(value, nsmall = 1),
align = "center",
minWidth = 200,
headerStyle = list(background = "#f7f7f8")
),
columns = list(
Species = colDef(minWidth = 200)  # overrides the default
),
bordered = TRUE,
highlight = TRUE,
filterable = TRUE,
searchable = TRUE
)
withtitle <- htmlwidgets::prependContent(table_out,
h2(class = "title", paste("Crime (group A) frequency by type and month in each neighborhood")),
font=list(size=5))
withtitle
View(nibrs_crime_category_nh)
libDB <- "D:/SMU/Ph.D/CPAL/"
nibrs_crime_category_nh <- import(paste0(libDB, "New Model Development/Neighborhood Crime Dashboard/nibrs_crime_category_nh.csv"))
nibrs_crime_category_nh <- nibrs_crime_category_nh %>% dplyr:: select("NIRBRS Crime Category",grep("Frequency at", names(nibrs_crime_category_nh)))
nibrs_crime_category_nh <- nibrs_crime_category_nh %>%
select("NIRBRS Crime Category", where(~ is.numeric(.) && sum(.) >= 1100))
#nibrs_crime_category_nh <- data.frame(nibrs_crime_category_nh)
a <- colSums(Filter(is.numeric, nibrs_crime_category_nh))
a <- c("Total Count", a)
nibrs_crime_category_nh[21,] <- a
table_out <- reactable(
nibrs_crime_category_nh,
defaultColDef = colDef(
header = function(value) gsub(".", " ", value, fixed = TRUE),
cell = function(value) format(value, nsmall = 1),
align = "center",
minWidth = 200,
headerStyle = list(background = "#f7f7f8")
),
columns = list(
Species = colDef(minWidth = 200)  # overrides the default
),
bordered = TRUE,
highlight = TRUE,
filterable = TRUE,
searchable = TRUE
)
withtitle <- htmlwidgets::prependContent(table_out,
h2(class = "title", paste("Crime (group A) frequency by category in the top 5 neighborhoods with the most crimes")),
font=list(size=5))
withtitle
nibrs_crime_nh_viz <- nibrs_crime_nh %>% dplyr::select("NIRBRS Crime", `Frequency at Tenth Street`) %>%
arrange(desc(`Frequency at Tenth Street`)) %>% slice(1:5)
nibrs_crime_nh_viz <- nibrs_crime_category_nh %>% dplyr::select("NIRBRS Crime", `Frequency at Tenth Street`) %>%
arrange(desc(`Frequency at Tenth Street`)) %>% slice(1:5)
View(nibrs_crime_category_nh)
nibrs_crime_nh_viz <- nibrs_crime_category_nh %>% dplyr::select("NIRBRS Crime Category", `Frequency at Tenth Street`) %>%
arrange(desc(`Frequency at Tenth Street`)) %>% slice(1:5)
names(nibrs_crime_category_nh)
nibrs_crime_nh_viz <- nibrs_crime_category_nh %>% dplyr::select("NIRBRS Crime Category", `Frequency at Vickery Meadow(s)`) %>%
arrange(desc(`Frequency at Vickery Meadow(s)`)) %>% slice(1:5)
ggplot(nibrs_crime_nh_viz, aes(x=`NIRBRS Crime`, y=`Frequency at Vickery Meadow(s)`)) +
geom_bar(stat = "identity") + theme(axis.text.x = element_text(angle = 30, hjust = 1, size = 8)) +
geom_text(aes(label = `Frequency at Vickery Meadow(s)`), vjust = 1.5, colour = "white") +
ggtitle("Crime Frequency at Vickery Meadow(s)") + ylab("Frequency")
nibrs_crime_nh_viz <- nibrs_crime_category_nh %>% dplyr::select("NIRBRS Crime Category", `Frequency at Vickery Meadow(s)`) %>%
arrange(desc(`Frequency at Vickery Meadow(s)`)) %>% slice(1:5)
ggplot(nibrs_crime_nh_viz, aes(x=`NIRBRS Crime Category`, y=`Frequency at Vickery Meadow(s)`)) +
geom_bar(stat = "identity") + theme(axis.text.x = element_text(angle = 30, hjust = 1, size = 8)) +
geom_text(aes(label = `Frequency at Vickery Meadow(s)`), vjust = 1.5, colour = "white") +
ggtitle("Crime Frequency at Vickery Meadow(s)") + ylab("Frequency")
